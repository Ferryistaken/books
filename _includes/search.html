<!-- Search Bar -->
<div>
    <input type="text" id="searchQuery" placeholder="Enter search query">
    <button id="searchButton">Search</button>
</div>

<!-- Results Display Area -->
<div id="searchResults"></div>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        document.getElementById('searchButton').addEventListener('click', performSearch);
    });

    function performSearch() {
        var query = document.getElementById('searchQuery').value;
        var searchUrl = `https://{{ site.url }}/.netlify/functions/search?q=${encodeURIComponent(query)}`;

        fetch(searchUrl)
            .then(response => response.json())
            .then(data => {
                displayResults(data);
            })
            .catch(error => {
                console.error('Error:', error);
                displayResults(["Error: Could not retrieve results"]);
            });
    }

    function displayResults(results) {
        var resultsDiv = document.getElementById('searchResults');
        resultsDiv.innerHTML = '';
        results.forEach(result => {
            var para = document.createElement("p");
            para.textContent = result;
            resultsDiv.appendChild(para);
        });
    }
</script>
